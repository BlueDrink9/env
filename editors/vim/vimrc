set nocompatible
" Automatically create vimfile directories in same location as vimrc
let s:vimrcdir = fnamemodify(expand("$MYVIMRC"), ":p:h")
let g:remoteSession = ($SSH_CLIENT != "")

" Version 7.1 doesn't support fnameescape. Used on iOS.
if v:version >= 703
    function! CreateVimDir(dir)
        let l:dir = fnameescape(expand('/' . a:dir))
        if filewritable(s:vimrcdir) && !isdirectory(s:vimrcdir . l:dir)
            silent exec "!mkdir "s:vimrcdir . l:dir
        endif
        return s:vimrcdir . l:dir
    endfunction
else
    function! CreateVimDir(dir)
        return a:dir
    endfunction
endif
call CreateVimDir("vimfiles")

" Folder in which current script resides:
if v:version >= 703
    let s:scriptpath = fnameescape(expand('<sfile>:p:h'))
else
    let s:scriptpath = expand('<sfile>:p:h')
endif


function! SourceCustoms(...)
    for vimfile in a:000
        " Converts the path properly for win or unix
        exec 'source ' . s:scriptpath . expand('/' . vimfile)
    endfor
endfunction

if !exists("g:light_plugins")
    let g:light_plugins = 0
endif

if g:light_plugins
    exec SourceCustoms("functions.vim", "settings.vim", "source_light_plugins.vim", "mappings.vim")
else
    exec SourceCustoms("functions.vim", "settings.vim", "plugins.vim", "mappings.vim")
endif
